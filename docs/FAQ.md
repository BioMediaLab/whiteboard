## Useful Links

- Amplify documentation - https://aws-amplify.github.io/
- Introduction to Amplify - https://medium.com/open-graphql/create-a-multiuser-graphql-crud-l-app-in-10-minutes-with-the-new-aws-amplify-cli-and-in-a-few-73aef3d49545
- Polaris Documentation: https://polaris.shopify.com/components/get-started
- AWS Console: https://umaine.signin.aws.amazon.com

## Structure

### What is the component structure of the app?

```
App
  |-- ErrorBoundary - catches unhandled errors.
    |-- Provider - provider for the redux store, should be ready to be removed. replaced with hooks.
      |-- ApiProvider - api provider for the redux store, should be ready to be removed. replaced with hooks.
        |-- AppShell - Shows the global wrapper around the app (header, nav, user menu, etc.)
          |-- Router - responsible for showing the content of each page.
            |-- containers (content pages)

```

### What is the structure of each container

Each container basically follows the same format. The presentational and user events are specified in the top component. The data loading
is loaded in the bottom component. To load data they use the `useDataLoader` component, which also serializes the data response for easier use in templates. To write data to the server they use `useApi`, which provide direct access to the Graphql operations that are generated by Amplify.

## Hooks

### useApi

`useApi(<operationName>)`

**parameters:**
operationName - name of the graphql operation generated by Amplify. if you open the file (src/graphql/\*) it will match one the export names.

**returns:**
`[state, execute]`

`state` - is an object that contains 5 properties. `pending`, `succeeded`, `errored` represent the state of an http request. `data` is the body of a successful response, `errors` are the errors received as part of a failure

`execute` - is the method that can be used to execute the graphql operation. it may or may not take an object of data depending on whether you are doing a mutation(does) or query(does not).

### useCurrentUser

`useCurrentUser` - used to load data about the current authenticated user

### useDataLoader

`useDataLoader(operationName)` - performs a graphql query on page load.

**parameters:**

`operationName` - name of the graphql operation generated by Amplify. if you open the file (src/graphql/queries.js) it will match one the export names.

**response**

`state` - is an object that contains 5 properties. `pending`, `succeeded`, `errored` represent the state of an http request. `data` is the body of a successful response, `errors` are the errors received as part of a failure.

\* The contents of the data are not an exact representation of the response body, but it is similar. The body is formatted to allow for easier use by the template (removing redundant code cleanup). The items content are moved up to whatever the property is that they represent, so that the templates can iterate without manually mapping the data. The operation names are also changed to represent the name of whatever
entity they represent. (see example below)

Server Response:

```
{
  listCourses: {
    items: [
      {
        id: ...,
        title: ...,
        description: ...,
        quizAttempts: {
          items: [
            {
              studentId: 123
            },
            ...
          ]
        }
      },
      ...
    ]
  }
}
```

Formatted Response:

```
{
  courses: [
    {
      id: ...,
      title: ...,
      description: ...,
      quizAttempts: [
        {
          studentId: 123
        },
        ...
      ]
    },
    ...
  ]
}
```
